{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/auth/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/auth/index.vue","mtime":1716445932135},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLCAvLyDmlbDmja7liJfooagKICAgICAgdG90YWw6IDAsIC8vIOaVsOaNruW6k+S4reeahOaAu+iusOW9leaVsAogICAgICBwYWdlOiAxLCAvLyDpu5jorqTpobXnoIEKICAgICAgbGltaXQ6IDUsIC8vIOavj+mhteiusOW9leaVsAogICAgICBzZWFyY2hPYmo6IHt9LCAvLyDmn6Xor6LmnaHku7YKICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5YiX6KGo5pWw5o2uCiAgICBmZXRjaERhdGEoKSB7CiAgICAgIC8vIOWwgeijheWIhumhteWPguaVsAogICAgICB2YXIgcGFyYW0gPSB7fTsKICAgICAgcGFyYW0ub2Zmc2V0ID0gKHRoaXMucGFnZSAtIDEpICogdGhpcy5saW1pdDsKICAgICAgcGFyYW0ubGltaXQgPSB0aGlzLmxpbWl0OwogICAgICBwYXJhbS5xdWVyeV9wYXJhbXMgPSB7CiAgICAgICAgYXV0aF9zdGF0dXNfX2luOiBbImF1dGhvcml6ZWQiLCAiYXVkaXRpbmciLCAidW5hcHByb3ZlIl0sCiAgICAgIH07CiAgICAgIHV0aWxzQXBpLmdldFVzZXJMaXN0KHBhcmFtKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YV9saXN0OwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5saXN0Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAvLyDnibnmrorlpITnkIY65bCG55Sz6K+35pe26Ze055qE5pe26Ze05oiz6L2s5Li65pe26Ze05a2X56ym5LiyCiAgICAgICAgICB2YXIgdGltZSA9IHRoaXMubGlzdFtpXS5hdXRoX2FwcGx5X3RzOwogICAgICAgICAgdmFyIHRpbWVTdHIgPSBuZXcgRGF0ZShwYXJzZUludCh0aW1lKSAqIDEwMDApCiAgICAgICAgICAgIC50b0xvY2FsZVN0cmluZygpCgogICAgICAgICAgICAucmVwbGFjZSgvOlxkezEsMn0kLywgIiAiKTsKICAgICAgICAgIHRoaXMubGlzdFtpXS5hdXRoX2FwcGx5X3RzID0gdGltZVN0cjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi3s+i9rOiHs+WuoeaguOivpuaDheeVjOmdogogICAgdG9BdWRpdERldGFpbCh1c2VySWQsIHRhZykgewogICAgICAvLyDoi6V0YWfkuLow77yM5YiZ5Li65p+l55yL5pON5L2cCiAgICAgIC8vIOiLpXRhZ+S4ujHvvIzliJnkuLrlrqHmibnmk43kvZwKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvYXV0aC9kZXRhaWwiLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICB0YWc6IHRhZywKICAgICAgICAgIHVzZXJJZDogdXNlcklkLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOW9k+S/ruaUueavj+mhteaYvuekuueahOiusOW9leaVsOaXtuiwg+eUqOatpOWHveaVsAogICAgY2hhbmdlUGFnZVNpemUoc2l6ZSkgewogICAgICB0aGlzLmxpbWl0ID0gc2l6ZTsKICAgICAgLy8g6YeN5paw6I635Y+W5LiA5qyh5pWw5o2uCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgLy8g5b2T54K55Ye76aG156CB6L+b6KGM6aG16Z2i5YiH5o2i5pe26LCD55So5q2k5Ye95pWwCiAgICBjaGFuZ2VDdXJyZW50UGFnZShwYWdlKSB7CiAgICAgIHRoaXMucGFnZSA9IHBhZ2U7CiAgICAgIC8vIOmHjeaWsOiOt+WPluS4gOasoeaVsOaNrgogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIC8vIOa4heepuuafpeivouadoeS7tgogICAgcmVzZXREYXRhKCkgewogICAgICAvLyDov5jljp/mn6Xor6LooajljZUKICAgICAgdGhpcy5zZWFyY2hPYmogPSB7fTsKICAgICAgLy8g6YeN5paw6I635Y+W5LiA5qyh5pWw5o2uCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA+DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 列表 -->\n    <el-table :data=\"list\" border stripe>\n      <el-table-column label=\"序号\" width=\"50\">\n        <template slot-scope=\"scope\">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"real_name\" label=\"用户姓名\" align=\"center\" />\n      <el-table-column prop=\"mobile\" label=\"手机号\" align=\"center\" />\n      <el-table-column prop=\"id_card\" label=\"身份证号\" align=\"center\" />\n      <el-table-column prop=\"auth_status\" label=\"状态\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag type=\"warning\" v-if=\"scope.row.auth_status === 'auditing'\">\n            审核中\n          </el-tag>\n          <el-tag type=\"primary\" v-if=\"scope.row.auth_status === 'authorized'\">\n            已实名\n          </el-tag>\n          <el-tag type=\"danger\" v-if=\"scope.row.auth_status === 'unapprove'\">\n            审核不通过\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"auth_apply_ts\" label=\"申请时间\" align=\"center\" />\n      <el-table-column label=\"操作\" align=\"center\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            size=\"mini\"\n            @click=\"toAuditDetail(scope.row.user_id, 0)\"\n          >\n            查看\n          </el-button>\n          <el-button\n            v-if=\"scope.row.auth_status === 'auditing'\"\n            type=\"warning\"\n            size=\"mini\"\n            @click=\"toAuditDetail(scope.row.user_id, 1)\"\n          >\n            审批\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      @size-change=\"changePageSize\"\n      @current-change=\"changeCurrentPage\"\n      :current-page=\"page\"\n      :page-sizes=\"[5, 10, 15, 20]\"\n      :page-size=\"limit\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\"\n      style=\"padding: 30px 0\"\n    ></el-pagination>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      list: [], // 数据列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 5, // 每页记录数\n      searchObj: {}, // 查询条件\n    };\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  methods: {\n    // 获取列表数据\n    fetchData() {\n      // 封装分页参数\n      var param = {};\n      param.offset = (this.page - 1) * this.limit;\n      param.limit = this.limit;\n      param.query_params = {\n        auth_status__in: [\"authorized\", \"auditing\", \"unapprove\"],\n      };\n      utilsApi.getUserList(param).then((response) => {\n        this.list = response.data.data_list;\n        this.total = response.data.total;\n        for (var i = 0; i < this.list.length; ++i) {\n          // 特殊处理:将申请时间的时间戳转为时间字符串\n          var time = this.list[i].auth_apply_ts;\n          var timeStr = new Date(parseInt(time) * 1000)\n            .toLocaleString()\n\n            .replace(/:\\d{1,2}$/, \" \");\n          this.list[i].auth_apply_ts = timeStr;\n        }\n      });\n    },\n    // 跳转至审核详情界面\n    toAuditDetail(userId, tag) {\n      // 若tag为0，则为查看操作\n      // 若tag为1，则为审批操作\n      this.$router.push({\n        path: \"/auth/detail\",\n        query: {\n          tag: tag,\n          userId: userId,\n        },\n      });\n    },\n    // 当修改每页显示的记录数时调用此函数\n    changePageSize(size) {\n      this.limit = size;\n      // 重新获取一次数据\n      this.fetchData();\n    },\n    // 当点击页码进行页面切换时调用此函数\n    changeCurrentPage(page) {\n      this.page = page;\n      // 重新获取一次数据\n      this.fetchData();\n    },\n    // 清空查询条件\n    resetData() {\n      // 还原查询表单\n      this.searchObj = {};\n      // 重新获取一次数据\n      this.fetchData();\n    },\n  },\n};\n</script>\n"]}]}