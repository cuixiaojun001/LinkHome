{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/order/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/order/index.vue","mtime":1716445932139},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9yZGVyRGV0YWlsOiBbXSwgLy8g6K6i5Y2V5pWw5o2uCiAgICAgIG9yZGVyTGlzdDogW10sIC8vIOaVsOaNruWIl+ihqAogICAgICB0b3RhbDogMCwgLy8g5pWw5o2u5bqT5Lit55qE5oC76K6w5b2V5pWwCiAgICAgIHBhZ2U6IDEsIC8vIOm7mOiupOmhteeggQogICAgICBsaW1pdDogNSwgLy8g5q+P6aG16K6w5b2V5pWwCiAgICAgIHNlYXJjaE9iajoge30sIC8vIOafpeivouadoeS7tgogICAgICBkaWFsb2dNZXRlclZpc2libGU6IGZhbHNlLCAvLyDmjqfliLbmioTooajlr7nor53moYbmmK/lkKbmmL7npLoKICAgICAgbWV0ZXJUaXRsZTogIiIsIC8vIOaKhOihqOWvueivneahhuagh+mimAogICAgICBtZXRlckRhdGE6IFtdLCAvLyDmioTooajmmL7npLrmlbDmja4KICAgICAgc2VsZWN0SG91c2U6ICIiLCAvLyDpgInmi6nnmoTmiL/mupAKICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgfSwKCiAgd2F0Y2g6IHsKICAgIC8vIOebkeWQrOmAieaLqeS6huWTquS4quaIv+a6kAogICAgc2VsZWN0SG91c2UobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgLy8gbmV3VmFs5Li65b2T5YmN6YCJ5Lit55qE5oi/5rqQ77yM5pi+56S66K+l5oi/5rqQ6K6i5Y2V5pWw5o2uCiAgICAgIHZhciBvcmRlciA9IHRoaXMub3JkZXJMaXN0W25ld1ZhbCAtIDFdOwogICAgICAvLyDmr4/mrKHpgInmi6nliY3muIXnqbrkuIDkuIvmlbDmja4KICAgICAgdGhpcy5vcmRlckRldGFpbCA9IFtdOwogICAgICB0aGlzLm9yZGVyRGV0YWlsLnB1c2gob3JkZXIpOwogICAgfSwKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bliJfooajmlbDmja4KICAgIGZldGNoRGF0YSgpIHsKICAgICAgLy8g5bCB6KOF5YiG6aG15Y+C5pWwCiAgICAgIHZhciBwYXJhbSA9IHt9OwogICAgICBwYXJhbS5vZmZzZXQgPSAodGhpcy5wYWdlIC0gMSkgKiB0aGlzLmxpbWl0OwogICAgICBwYXJhbS5saW1pdCA9IHRoaXMubGltaXQ7CiAgICAgIHBhcmFtLnF1ZXJ5X3BhcmFtcyA9IHt9OwogICAgICB1dGlsc0FwaS5nZXRPcmRlckxpc3QocGFyYW0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5vcmRlckxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGFfbGlzdDsKICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICAvLyDlsIHoo4XotLnnlKjlkI3mlbDnu4QKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub3JkZXJMaXN0Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICB2YXIgamUgPSBbXTsKICAgICAgICAgIHZhciBmeW0gPSBbXTsKICAgICAgICAgIGplLnB1c2godGhpcy5vcmRlckxpc3RbaV0uaG91c2VfaW5mby5yZW50X21vbmV5KTsKICAgICAgICAgIGplLnB1c2goCiAgICAgICAgICAgIHRoaXMub3JkZXJMaXN0W2ldLmhvdXNlX2luZm8uZGVwb3NpdF9yYXRpbyAqCiAgICAgICAgICAgICAgdGhpcy5vcmRlckxpc3RbaV0uaG91c2VfaW5mby5yZW50X21vbmV5CiAgICAgICAgICApOwogICAgICAgICAgamUucHVzaCh0aGlzLm9yZGVyTGlzdFtpXS5ob3VzZV9pbmZvLndhdGVyX3JlbnQpOwogICAgICAgICAgamUucHVzaCh0aGlzLm9yZGVyTGlzdFtpXS5ob3VzZV9pbmZvLmVsZWN0cmljaXR5X3JlbnQpOwogICAgICAgICAgamUucHVzaCh0aGlzLm9yZGVyTGlzdFtpXS5ob3VzZV9pbmZvLnN0cmF0YV9mZWUpOwogICAgICAgICAgZnltLnB1c2goIuenn+mHkSIpOwogICAgICAgICAgZnltLnB1c2goIuaKvOmHkSIpOwogICAgICAgICAgZnltLnB1c2goIuawtOi0uSIpOwogICAgICAgICAgZnltLnB1c2goIueUtei0uSIpOwogICAgICAgICAgZnltLnB1c2goIueuoeeQhui0uSIpOwogICAgICAgICAgdGhpcy5vcmRlckxpc3RbaV0uamUgPSBqZTsKICAgICAgICAgIHRoaXMub3JkZXJMaXN0W2ldLmZ5bSA9IGZ5bTsKICAgICAgICB9CiAgICAgICAgLy8g5pi+56S656ys5LiA5Liq5oi/5rqQ5pWw5o2uCiAgICAgICAgdGhpcy5zZWxlY3RIb3VzZSA9IHRoaXMub3JkZXJMaXN0WzBdLmhvdXNlX2lkOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBmZXRjaERhdGEoKSB7CiAgICAvLyAgIHRoaXMub3JkZXJMaXN0ID0gWwogICAgLy8gICAgIHsKICAgIC8vICAgICAgIGlkOiAxLAogICAgLy8gICAgICAgemg6ICLmiL/mupAxIC0g5byg5LiJIiwKICAgIC8vICAgICAgIHpkbHg6ICLnp5/ph5HotKbljZUiLAogICAgLy8gICAgICAgc3pyOiAiMjAyMi0wNC0yMSIsCiAgICAvLyAgICAgICB6ZHpxOiAiMjAyMi0wNC0yMCDoh7MgMjAyMi0wNS0xOSIsCiAgICAvLyAgICAgICB4ajogIjE1MjAzLjAwIiwKICAgIC8vICAgICAgIGZ5bTogWyLmirzph5EiLCAi56ef6YeRIiwgIueUtei0uSIsICLmsLTotLkiLCAi5Z6D5Zy+5aSE55CG6LS5IiwgIue9kei0uSIsICLniankuJrotLkiXSwKICAgIC8vICAgICAgIGplOiBbCiAgICAvLyAgICAgICAgICIxMDAwMC4wMCIsCiAgICAvLyAgICAgICAgICI1MDAwLjAwIiwKICAgIC8vICAgICAgICAgIjEwMC4wMCIsCiAgICAvLyAgICAgICAgICIxMDAuMDAiLAogICAgLy8gICAgICAgICAiMS4wMCIsCiAgICAvLyAgICAgICAgICIxLjAwIiwKICAgIC8vICAgICAgICAgIjEuMDAiLAogICAgLy8gICAgICAgXSwKICAgIC8vICAgICAgIGJ6OiAi5pegIiwKICAgIC8vICAgICAgIGNiOiAiIiwKICAgIC8vICAgICB9LAogICAgLy8gICBdOwogICAgLy8gfSwKCiAgICAvLyDmmL7npLrmioTooajlr7nor53moYYKICAgIG1ldGVyUmVhZGluZygpIHsKICAgICAgLy8g5ou85o6l5oqE6KGo5a+56K+d5qGG5qCH6aKYCiAgICAgIHRoaXMubWV0ZXJUaXRsZSA9ICLmioTooagiOwogICAgICB0aGlzLmRpYWxvZ01ldGVyVmlzaWJsZSA9IHRydWU7CiAgICAgIC8vIOWHhuWkh+aKhOihqOaYvuekuuaVsOaNrgogICAgICB0aGlzLm1ldGVyRGF0YSA9IFsKICAgICAgICB7IGZ5eDogIueUtei0uSIsIHNxZHM6ICIwIiwgZnk6ICIwLjAwIiB9LAogICAgICAgIHsgZnl4OiAi5rC06LS5Iiwgc3FkczogIjAiLCBmeTogIjAuMDAiIH0sCiAgICAgIF07CiAgICB9LAogICAgLy8g5b2T5L+u5pS55q+P6aG15pi+56S655qE6K6w5b2V5pWw5pe26LCD55So5q2k5Ye95pWwCiAgICBjaGFuZ2VQYWdlU2l6ZShzaXplKSB7CiAgICAgIHRoaXMubGltaXQgPSBzaXplOwogICAgICAvLyDph43mlrDojrflj5bkuIDmrKHmlbDmja4KICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgIH0sCiAgICAvLyDlvZPngrnlh7vpobXnoIHov5vooYzpobXpnaLliIfmjaLml7bosIPnlKjmraTlh73mlbAKICAgIGNoYW5nZUN1cnJlbnRQYWdlKHBhZ2UpIHsKICAgICAgdGhpcy5wYWdlID0gcGFnZTsKICAgICAgLy8g6YeN5paw6I635Y+W5LiA5qyh5pWw5o2uCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgLy8g5riF56m65p+l6K+i5p2h5Lu2CiAgICByZXNldERhdGEoKSB7CiAgICAgIC8vIOi/mOWOn+afpeivouihqOWNlQogICAgICB0aGlzLnNlYXJjaE9iaiA9IHt9OwogICAgICAvLyDph43mlrDojrflj5bkuIDmrKHmlbDmja4KICAgICAgdGhpcy5mZXRjaERhdGEoKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAyJA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/order","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 查询表单 -->\n    <el-form :inline=\"true\" class=\"demo-form-inline\">\n      <el-form-item label=\"选择房源\">\n        <el-select v-model=\"selectHouse\" placeholder=\"请选择\" clearable>\n          <el-option\n            v-for=\"(order, index) in orderList\"\n            :key=\"index\"\n            :label=\"order.house_info.title\"\n            :value=\"order.house_id\"\n          />\n        </el-select>\n      </el-form-item>\n    </el-form>\n    <!-- 列表 -->\n    <el-table :data=\"orderDetail\" border stripe>\n      <el-table-column label=\"#\" width=\"50\" fixed=\"\">\n        <template slot-scope=\"scope\">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"zh\" label=\"租户\" width=\"200px\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span style=\"color: blue\">{{ scope.row.house_info.title }}</span>\n          -\n          <span style=\"color: blue\">{{ scope.row.user_info.real_name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"zdlx\"\n        label=\"账单类型\"\n        width=\"100px\"\n        align=\"center\"\n      >\n        <template>\n          <span style=\"color: orange\">租金账单</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"start_date\"\n        label=\"收租日\"\n        width=\"100px\"\n        align=\"center\"\n      />\n      <el-table-column\n        prop=\"zdzq\"\n        label=\"账单周期\"\n        width=\"200px\"\n        align=\"center\"\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.start_date }}</span>\n          至\n          <span>{{ scope.row.end_date }}</span>\n        </template></el-table-column\n      >\n      <el-table-column prop=\"xj\" label=\"小计\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <span style=\"color: red\">¥{{ scope.row.pay_money }}</span>\n        </template></el-table-column\n      >\n      <el-table-column prop=\"fym\" label=\"费用名\" align=\"left\" width=\"100px\">\n        <template slot-scope=\"scope\">\n          <span\n            v-for=\"(f, index) in scope.row.fym\"\n            :key=\"index\"\n            style=\"display: block\"\n          >\n            {{ f }}\n          </span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"je\" label=\"金额\" align=\"left\">\n        <template slot-scope=\"scope\">\n          <span\n            v-for=\"(j, index) in scope.row.je\"\n            :key=\"index\"\n            style=\"display: block; color: red\"\n          >\n            ¥{{ j }}\n          </span>\n        </template></el-table-column\n      >\n      <el-table-column prop=\"bz\" label=\"备注\" align=\"center\" />\n      <el-table-column\n        prop=\"cb\"\n        label=\"抄表\"\n        align=\"center\"\n        @click=\"meterReading\"\n      />\n      <el-table-column label=\"操作\" align=\"center\" width=\"150\" fixed=\"right\">\n        <template>\n          <el-link type=\"primary\">账单详情</el-link>\n          <el-link type=\"primary\" style=\"margin-left: 20px\">到账</el-link>\n          <br />\n          <el-link type=\"primary\" @click=\"meterReading\">抄表</el-link>\n          <el-link type=\"primary\" style=\"margin-left: 20px\">更多</el-link>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :title=\"meterTitle\" :visible.sync=\"dialogMeterVisible\">\n      <el-table :data=\"meterData\">\n        <el-table-column\n          property=\"fyx\"\n          label=\"费用项\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column\n          property=\"sqds\"\n          label=\"上期读数\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column property=\"name\" label=\"本期读数\" align=\"center\">\n          <template> <el-input></el-input> </template\n        ></el-table-column>\n        <el-table-column\n          property=\"fy\"\n          label=\"费用\"\n          align=\"center\"\n        ></el-table-column>\n      </el-table>\n      <el-form>\n        <el-form-item\n          label=\"抄表日期\"\n          style=\"margin-top: 30px; margin-left: 30px\"\n        >\n          <el-date-picker type=\"date\" placeholder=\"选择日期\" align=\"center\">\n          </el-date-picker\n        ></el-form-item>\n        <el-form-item style=\"text-align: center\">\n          <el-button type=\"primary\" size=\"medium\">保存</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      @size-change=\"changePageSize\"\n      @current-change=\"changeCurrentPage\"\n      :current-page=\"page\"\n      :page-sizes=\"[5, 10, 15, 20]\"\n      :page-size=\"limit\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\"\n      style=\"padding: 30px 0\"\n    ></el-pagination>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      orderDetail: [], // 订单数据\n      orderList: [], // 数据列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 5, // 每页记录数\n      searchObj: {}, // 查询条件\n      dialogMeterVisible: false, // 控制抄表对话框是否显示\n      meterTitle: \"\", // 抄表对话框标题\n      meterData: [], // 抄表显示数据\n      selectHouse: \"\", // 选择的房源\n    };\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  watch: {\n    // 监听选择了哪个房源\n    selectHouse(newVal, oldVal) {\n      // newVal为当前选中的房源，显示该房源订单数据\n      var order = this.orderList[newVal - 1];\n      // 每次选择前清空一下数据\n      this.orderDetail = [];\n      this.orderDetail.push(order);\n    },\n  },\n\n  methods: {\n    // 获取列表数据\n    fetchData() {\n      // 封装分页参数\n      var param = {};\n      param.offset = (this.page - 1) * this.limit;\n      param.limit = this.limit;\n      param.query_params = {};\n      utilsApi.getOrderList(param).then((response) => {\n        this.orderList = response.data.data_list;\n        this.total = response.data.total;\n        // 封装费用名数组\n        for (var i = 0; i < this.orderList.length; ++i) {\n          var je = [];\n          var fym = [];\n          je.push(this.orderList[i].house_info.rent_money);\n          je.push(\n            this.orderList[i].house_info.deposit_ratio *\n              this.orderList[i].house_info.rent_money\n          );\n          je.push(this.orderList[i].house_info.water_rent);\n          je.push(this.orderList[i].house_info.electricity_rent);\n          je.push(this.orderList[i].house_info.strata_fee);\n          fym.push(\"租金\");\n          fym.push(\"押金\");\n          fym.push(\"水费\");\n          fym.push(\"电费\");\n          fym.push(\"管理费\");\n          this.orderList[i].je = je;\n          this.orderList[i].fym = fym;\n        }\n        // 显示第一个房源数据\n        this.selectHouse = this.orderList[0].house_id;\n      });\n    },\n    // fetchData() {\n    //   this.orderList = [\n    //     {\n    //       id: 1,\n    //       zh: \"房源1 - 张三\",\n    //       zdlx: \"租金账单\",\n    //       szr: \"2022-04-21\",\n    //       zdzq: \"2022-04-20 至 2022-05-19\",\n    //       xj: \"15203.00\",\n    //       fym: [\"押金\", \"租金\", \"电费\", \"水费\", \"垃圾处理费\", \"网费\", \"物业费\"],\n    //       je: [\n    //         \"10000.00\",\n    //         \"5000.00\",\n    //         \"100.00\",\n    //         \"100.00\",\n    //         \"1.00\",\n    //         \"1.00\",\n    //         \"1.00\",\n    //       ],\n    //       bz: \"无\",\n    //       cb: \"\",\n    //     },\n    //   ];\n    // },\n\n    // 显示抄表对话框\n    meterReading() {\n      // 拼接抄表对话框标题\n      this.meterTitle = \"抄表\";\n      this.dialogMeterVisible = true;\n      // 准备抄表显示数据\n      this.meterData = [\n        { fyx: \"电费\", sqds: \"0\", fy: \"0.00\" },\n        { fyx: \"水费\", sqds: \"0\", fy: \"0.00\" },\n      ];\n    },\n    // 当修改每页显示的记录数时调用此函数\n    changePageSize(size) {\n      this.limit = size;\n      // 重新获取一次数据\n      this.fetchData();\n    },\n    // 当点击页码进行页面切换时调用此函数\n    changeCurrentPage(page) {\n      this.page = page;\n      // 重新获取一次数据\n      this.fetchData();\n    },\n    // 清空查询条件\n    resetData() {\n      // 还原查询表单\n      this.searchObj = {};\n      // 重新获取一次数据\n      this.fetchData();\n    },\n  },\n};\n</script>\n"]}]}