{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/auth/detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/auth/detail.vue","mtime":1716445932135},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhZzogMCwgLy8g5pON5L2c5qCH6K+GCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsIC8v6Ziy5q2i6YeN5aSN5o+Q5LqkCiAgICAgIHVzZXI6IHt9LAogICAgICB1c2VySWQ6IDAsCiAgICAgIGF1dGhfc3RhdHVzX2ZsYWc6ICIxIiwKICAgIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIC8vIOiOt+WPluWunuWQjeiupOivgeWIl+ihqOS8oOmAkui/h+adpeeahOWPguaVsAogICAgdGhpcy50YWcgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YWc7CiAgICB0aGlzLnVzZXJJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnVzZXJJZDsKICAgIHRoaXMuZmV0Y2hEYXRhQnlJZCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluaMh+WumueUqOaIt2lk55qE5a6h5qC46K+m5oOF5L+h5oGvCiAgICAvLyDmoLnmja5pZOafpeivoueUqOaIt+ivpuaDhQogICAgZmV0Y2hEYXRhQnlJZCgpIHsKICAgICAgdXRpbHNBcGkuZ2V0VXNlckRldGFpbEJ5SWQodGhpcy51c2VySWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvLyDnibnmrorlpITnkIY65bCG5rOo5YaM5pe26Ze055qE5pe26Ze05oiz6L2s5Li65pe26Ze05a2X56ym5LiyCiAgICAgICAgdmFyIHRpbWUgPSB0aGlzLnVzZXIuYXV0aF9hcHBseV90czsKICAgICAgICB2YXIgdGltZVN0ciA9IG5ldyBEYXRlKHBhcnNlSW50KHRpbWUpICogMTAwMCkKICAgICAgICAgIC50b0xvY2FsZVN0cmluZygpCiAgICAgICAgICAucmVwbGFjZSgvOlxkezEsMn0kLywgIiAiKTsKICAgICAgICB0aGlzLnVzZXIuYXV0aF9hcHBseV90cyA9IHRpbWVTdHI7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi/lOWbnuWunuWQjeiupOivgeWIl+ihqAogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9hdXRoL2luZGV4Iik7CiAgICB9LAogICAgLy8g5o+Q5Lqk5a6h5qC4CiAgICBvblN1Ym1pdCgpIHsKICAgICAgLy8g5Yik5pat5a6h5qC45piv5ZCm6YCa6L+HCiAgICAgIGlmICh0aGlzLmF1dGhfc3RhdHVzX2ZsYWcgPT09ICIwIikgewogICAgICAgIHRoaXMudXNlci5hdXRoX3N0YXR1cyA9ICJ1bmFwcHJvdmUiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYXV0aF9zdGF0dXNfZmxhZyA9PT0gIjEiKSB7CiAgICAgICAgdGhpcy51c2VyLmF1dGhfc3RhdHVzID0gImF1dGhvcml6ZWQiOwogICAgICB9CiAgICAgIC8vIOabtOaWsOeUqOaIt+S/oeaBrwogICAgICB1dGlsc0FwaS51cGRhdGVVc2VyRGV0YWlsQnlJZCh0aGlzLnVzZXJJZCwgdGhpcy51c2VyKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5a6h5qC45a6M5oiQIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8g6Lez6L2s5Zue5a6e5ZCN6K6k6K+B5YiX6KGoCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYXV0aC9pbmRleCIpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";AAwFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"100px\" class=\"form-table\">\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"状态\">\n            <span v-if=\"user.auth_status === 'auditing'\">审核中</span>\n            <span v-if=\"user.auth_status === 'authorized'\">已实名</span>\n            <span v-if=\"user.auth_status === 'unapprove'\">审核不通过</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"申请时间\">\n            {{ user.auth_apply_ts }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"姓名\">\n            {{ user.real_name }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"性别\">\n            <span v-if=\"user.gender === 'male'\">男</span>\n            <span v-if=\"user.gender === 'female'\">女</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"年龄\">\n            {{ user.age }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"手机\">\n            {{ user.mobile }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"身份证号\">\n            {{ user.id_card }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form-item label=\"身份证正面\">\n            <span>\n              <el-image style=\"width: 150px\" :src=\"user.id_card_front\" />\n            </span>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form-item label=\"身份证反面\">\n            <span>\n              <el-image style=\"width: 150px\" :src=\"user.id_card_back\" />\n            </span>\n          </el-form-item>\n        </el-col>\n      </el-row>\n\n      <el-row style=\"text-align: center\" v-if=\"tag === 0\">\n        <el-button @click=\"back\"> 返回 </el-button>\n      </el-row>\n    </el-form>\n\n    <el-form label-width=\"170px\">\n      <el-form-item label=\"是否通过\" v-if=\"tag === 1\">\n        <el-radio-group v-model=\"auth_status_flag\">\n          <el-radio label=\"1\"> 通过 </el-radio>\n          <el-radio label=\"0\"> 不通过 </el-radio>\n        </el-radio-group>\n      </el-form-item>\n\n      <el-row style=\"text-align: center\" v-if=\"tag === 1\">\n        <el-button type=\"primary\" @click=\"onSubmit()\"> 确定 </el-button>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      tag: 0, // 操作标识\n      saveBtnDisabled: false, //防止重复提交\n      user: {},\n      userId: 0,\n      auth_status_flag: \"1\",\n    };\n  },\n\n  mounted() {\n    // 获取实名认证列表传递过来的参数\n    this.tag = this.$route.query.tag;\n    this.userId = this.$route.query.userId;\n    this.fetchDataById();\n  },\n\n  methods: {\n    // 获取指定用户id的审核详情信息\n    // 根据id查询用户详情\n    fetchDataById() {\n      utilsApi.getUserDetailById(this.userId).then((response) => {\n        this.user = response.data;\n        // 特殊处理:将注册时间的时间戳转为时间字符串\n        var time = this.user.auth_apply_ts;\n        var timeStr = new Date(parseInt(time) * 1000)\n          .toLocaleString()\n          .replace(/:\\d{1,2}$/, \" \");\n        this.user.auth_apply_ts = timeStr;\n      });\n    },\n    // 返回实名认证列表\n    back() {\n      this.$router.push(\"/auth/index\");\n    },\n    // 提交审核\n    onSubmit() {\n      // 判断审核是否通过\n      if (this.auth_status_flag === \"0\") {\n        this.user.auth_status = \"unapprove\";\n      } else if (this.auth_status_flag === \"1\") {\n        this.user.auth_status = \"authorized\";\n      }\n      // 更新用户信息\n      utilsApi.updateUserDetailById(this.userId, this.user).then((response) => {\n        if (response.message === \"SUCCESS\") {\n          this.$message({\n            message: \"审核完成\",\n            type: \"success\",\n          });\n        }\n      });\n      // 跳转回实名认证列表\n      this.$router.push(\"/auth/index\");\n    },\n  },\n};\n</script>\n"]}]}