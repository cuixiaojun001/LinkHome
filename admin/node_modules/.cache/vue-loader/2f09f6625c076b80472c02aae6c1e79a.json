{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/user/detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/user/detail.vue","mtime":1716445932139},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJEZXRhaWw6IHt9LAogICAgICBpc0VkaXQ6IGZhbHNlLCAvLyDmmK/lkKbnvJbovpEKICAgICAgdXNlcklkOiAwLCAvLyDnlKjmiLdpZAogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgLy8g5o6l5pS25Yiw55So5oi35YiX6KGo5Lyg6YCS6L+H5p2l55qE55So5oi3aWQKICAgIHRoaXMudXNlcklkID0gdGhpcy4kcm91dGUucXVlcnkudXNlcklkOwogICAgdGhpcy5mZXRjaERhdGFCeUlkKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8g5qC55o2uaWTmn6Xor6LnlKjmiLfor6bmg4UKICAgIGZldGNoRGF0YUJ5SWQoKSB7CiAgICAgIHV0aWxzQXBpLmdldFVzZXJEZXRhaWxCeUlkKHRoaXMudXNlcklkKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudXNlckRldGFpbCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgLy8g54m55q6K5aSE55CGOuWwhuazqOWGjOaXtumXtOeahOaXtumXtOaIs+i9rOS4uuaXtumXtOWtl+espuS4sgogICAgICAgIHZhciB0aW1lID0gdGhpcy51c2VyRGV0YWlsLmNyZWF0ZV90czsKICAgICAgICB2YXIgdGltZVN0ciA9IG5ldyBEYXRlKHBhcnNlSW50KHRpbWUpICogMTAwMCkKICAgICAgICAgIC50b0xvY2FsZVN0cmluZygpCgogICAgICAgICAgLnJlcGxhY2UoLzpcZHsxLDJ9JC8sICIgIik7CiAgICAgICAgdGhpcy51c2VyRGV0YWlsLmNyZWF0ZV90cyA9IHRpbWVTdHI7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOe8lui+keeUqOaIt+ivpuaDhQogICAgZWRpdFVzZXJEZXRhaWwoKSB7CiAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTsKICAgIH0sCgogICAgLy8g5pu05paw55So5oi36K+m5oOFCiAgICBzYXZlVXNlckRldGFpbCgpIHsKICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsKICAgICAgdXRpbHNBcGkKICAgICAgICAudXBkYXRlVXNlckRldGFpbEJ5SWQodGhpcy51c2VySWQsIHRoaXMudXNlckRldGFpbCkKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogIuabtOaWsOaIkOWKnyIsCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0sCgogICAgLy8g6L+U5Zue55So5oi35L+h5oGv5YiX6KGoCiAgICBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIvaW5kZXgiKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";AA+HA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"100px\" class=\"form-table\">\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户名\">\n            <span v-if=\"isEdit === false\">\n              {{ userDetail.username }}\n            </span>\n            <el-input v-else v-model=\"userDetail.username\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户角色\">\n            <span>\n              <span v-if=\"userDetail.role === 'admin'\">管理员</span>\n              <span v-if=\"userDetail.role === 'tenant'\">租客</span>\n              <span v-if=\"userDetail.role === 'landlord'\">房东</span>\n              <span v-if=\"userDetail.role === 'steward'\">管家</span>\n            </span>\n            <!-- <el-select v-else v-model=\"userDetail.role\" placeholder=\"用户角色\">\n              <el-option value=\"admin\" label=\"管理员\"></el-option>\n              <el-option value=\"tenant\" label=\"租客\"></el-option>\n              <el-option value=\"landlord\" label=\"房东\"></el-option>\n              <el-option value=\"steward\" label=\"管家\"></el-option>\n            </el-select> -->\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"手机号\">\n            {{ userDetail.mobile }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"真实姓名\">\n            {{ userDetail.real_name }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"邮箱\">\n            <span v-if=\"isEdit === false\">{{ userDetail.mail }}</span>\n            <el-input v-else v-model=\"userDetail.mail\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"头像\">\n            <el-image\n              style=\"width: 150px\"\n              :src=\"userDetail.avatar\"\n              :preview-src-list=\"[userDetail.avatar]\"\n            />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户状态\">\n            <span v-if=\"userDetail.state === 'normal'\">正常</span>\n            <span v-if=\"userDetail.state === 'deleted'\">已锁定</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"身份证号\">\n            {{ userDetail.id_card }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"职业\">\n            <span v-if=\"isEdit === false\">{{ userDetail.career }}</span>\n            <el-input v-else v-model=\"userDetail.career\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"性别\">\n            <span v-if=\"isEdit === false\">\n              <span v-if=\"userDetail.gender === 'male'\">男</span>\n              <span v-if=\"userDetail.gender === 'female'\">女</span>\n            </span>\n            <el-radio-group v-else v-model=\"userDetail.gender\">\n              <el-radio label=\"male\">男</el-radio>\n              <el-radio label=\"female\">女</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"注册时间\">\n            {{ userDetail.create_ts }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户简介\">\n            <span v-if=\"isEdit === false\">{{ userDetail.userDesc }}</span>\n            <el-input v-else v-model=\"userDetail.userDesc\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"爱好\">\n            <span v-if=\"isEdit === false\">{{ userDetail.hobby }}</span>\n            <el-input v-else v-model=\"userDetail.hobby\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n\n    <el-form>\n      <el-row style=\"text-align: center\">\n        <el-button\n          v-if=\"isEdit === false\"\n          type=\"warning\"\n          @click=\"editUserDetail\"\n        >\n          编辑\n        </el-button>\n        <el-button v-else type=\"primary\" @click=\"saveUserDetail\"\n          >保存</el-button\n        >\n        <el-button type=\"info\" @click=\"back\"> 返回 </el-button>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      userDetail: {},\n      isEdit: false, // 是否编辑\n      userId: 0, // 用户id\n    };\n  },\n\n  created() {\n    // 接收到用户列表传递过来的用户id\n    this.userId = this.$route.query.userId;\n    this.fetchDataById();\n  },\n\n  methods: {\n    // 根据id查询用户详情\n    fetchDataById() {\n      utilsApi.getUserDetailById(this.userId).then((response) => {\n        this.userDetail = response.data;\n        // 特殊处理:将注册时间的时间戳转为时间字符串\n        var time = this.userDetail.create_ts;\n        var timeStr = new Date(parseInt(time) * 1000)\n          .toLocaleString()\n\n          .replace(/:\\d{1,2}$/, \" \");\n        this.userDetail.create_ts = timeStr;\n      });\n    },\n    // 编辑用户详情\n    editUserDetail() {\n      this.isEdit = true;\n    },\n\n    // 更新用户详情\n    saveUserDetail() {\n      this.isEdit = false;\n      utilsApi\n        .updateUserDetailById(this.userId, this.userDetail)\n        .then((response) => {\n          if (response.message === \"SUCCESS\") {\n            this.$message({\n              message: \"更新成功\",\n              type: \"success\",\n            });\n          }\n        });\n    },\n\n    // 返回用户信息列表\n    back() {\n      this.$router.push(\"/user/index\");\n    },\n  },\n};\n</script>\n"]}]}