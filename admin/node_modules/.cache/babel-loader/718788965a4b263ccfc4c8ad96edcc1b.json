{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js!/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/user/detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/user/detail.vue","mtime":1716445932139},{"path":"/Users/ke/workspace/platform/house_admin/babel.config.js","mtime":1716445932121},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlckRldGFpbDoge30sCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIC8vIOaYr+WQpue8lui+kQogICAgICB1c2VySWQ6IDAgLy8g55So5oi3aWQKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8g5o6l5pS25Yiw55So5oi35YiX6KGo5Lyg6YCS6L+H5p2l55qE55So5oi3aWQKICAgIHRoaXMudXNlcklkID0gdGhpcy4kcm91dGUucXVlcnkudXNlcklkOwogICAgdGhpcy5mZXRjaERhdGFCeUlkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmoLnmja5pZOafpeivoueUqOaIt+ivpuaDhQogICAgZmV0Y2hEYXRhQnlJZDogZnVuY3Rpb24gZmV0Y2hEYXRhQnlJZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdXRpbHNBcGkuZ2V0VXNlckRldGFpbEJ5SWQodGhpcy51c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMudXNlckRldGFpbCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgLy8g54m55q6K5aSE55CGOuWwhuazqOWGjOaXtumXtOeahOaXtumXtOaIs+i9rOS4uuaXtumXtOWtl+espuS4sgogICAgICAgIHZhciB0aW1lID0gX3RoaXMudXNlckRldGFpbC5jcmVhdGVfdHM7CiAgICAgICAgdmFyIHRpbWVTdHIgPSBuZXcgRGF0ZShwYXJzZUludCh0aW1lKSAqIDEwMDApLnRvTG9jYWxlU3RyaW5nKCkucmVwbGFjZSgvOlxkezEsMn0kLywgIiAiKTsKICAgICAgICBfdGhpcy51c2VyRGV0YWlsLmNyZWF0ZV90cyA9IHRpbWVTdHI7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOe8lui+keeUqOaIt+ivpuaDhQogICAgZWRpdFVzZXJEZXRhaWw6IGZ1bmN0aW9uIGVkaXRVc2VyRGV0YWlsKCkgewogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICB9LAogICAgLy8g5pu05paw55So5oi36K+m5oOFCiAgICBzYXZlVXNlckRldGFpbDogZnVuY3Rpb24gc2F2ZVVzZXJEZXRhaWwoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOwogICAgICB1dGlsc0FwaS51cGRhdGVVc2VyRGV0YWlsQnlJZCh0aGlzLnVzZXJJZCwgdGhpcy51c2VyRGV0YWlsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLmm7TmlrDmiJDlip8iLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6L+U5Zue55So5oi35L+h5oGv5YiX6KGoCiAgICBiYWNrOiBmdW5jdGlvbiBiYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIvaW5kZXgiKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["utilsApi","data","userDetail","isEdit","userId","created","$route","query","fetchDataById","methods","_this","getUserDetailById","then","response","time","create_ts","timeStr","Date","parseInt","toLocaleString","replace","editUserDetail","saveUserDetail","_this2","updateUserDetailById","message","$message","type","back","$router","push"],"sources":["src/views/user/detail.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"100px\" class=\"form-table\">\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户名\">\n            <span v-if=\"isEdit === false\">\n              {{ userDetail.username }}\n            </span>\n            <el-input v-else v-model=\"userDetail.username\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户角色\">\n            <span>\n              <span v-if=\"userDetail.role === 'admin'\">管理员</span>\n              <span v-if=\"userDetail.role === 'tenant'\">租客</span>\n              <span v-if=\"userDetail.role === 'landlord'\">房东</span>\n              <span v-if=\"userDetail.role === 'steward'\">管家</span>\n            </span>\n            <!-- <el-select v-else v-model=\"userDetail.role\" placeholder=\"用户角色\">\n              <el-option value=\"admin\" label=\"管理员\"></el-option>\n              <el-option value=\"tenant\" label=\"租客\"></el-option>\n              <el-option value=\"landlord\" label=\"房东\"></el-option>\n              <el-option value=\"steward\" label=\"管家\"></el-option>\n            </el-select> -->\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"手机号\">\n            {{ userDetail.mobile }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"真实姓名\">\n            {{ userDetail.real_name }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"邮箱\">\n            <span v-if=\"isEdit === false\">{{ userDetail.mail }}</span>\n            <el-input v-else v-model=\"userDetail.mail\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"头像\">\n            <el-image\n              style=\"width: 150px\"\n              :src=\"userDetail.avatar\"\n              :preview-src-list=\"[userDetail.avatar]\"\n            />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户状态\">\n            <span v-if=\"userDetail.state === 'normal'\">正常</span>\n            <span v-if=\"userDetail.state === 'deleted'\">已锁定</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"身份证号\">\n            {{ userDetail.id_card }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"职业\">\n            <span v-if=\"isEdit === false\">{{ userDetail.career }}</span>\n            <el-input v-else v-model=\"userDetail.career\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"性别\">\n            <span v-if=\"isEdit === false\">\n              <span v-if=\"userDetail.gender === 'male'\">男</span>\n              <span v-if=\"userDetail.gender === 'female'\">女</span>\n            </span>\n            <el-radio-group v-else v-model=\"userDetail.gender\">\n              <el-radio label=\"male\">男</el-radio>\n              <el-radio label=\"female\">女</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"注册时间\">\n            {{ userDetail.create_ts }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"用户简介\">\n            <span v-if=\"isEdit === false\">{{ userDetail.userDesc }}</span>\n            <el-input v-else v-model=\"userDetail.userDesc\"></el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"爱好\">\n            <span v-if=\"isEdit === false\">{{ userDetail.hobby }}</span>\n            <el-input v-else v-model=\"userDetail.hobby\"></el-input>\n          </el-form-item>\n        </el-col>\n      </el-row>\n    </el-form>\n\n    <el-form>\n      <el-row style=\"text-align: center\">\n        <el-button\n          v-if=\"isEdit === false\"\n          type=\"warning\"\n          @click=\"editUserDetail\"\n        >\n          编辑\n        </el-button>\n        <el-button v-else type=\"primary\" @click=\"saveUserDetail\"\n          >保存</el-button\n        >\n        <el-button type=\"info\" @click=\"back\"> 返回 </el-button>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      userDetail: {},\n      isEdit: false, // 是否编辑\n      userId: 0, // 用户id\n    };\n  },\n\n  created() {\n    // 接收到用户列表传递过来的用户id\n    this.userId = this.$route.query.userId;\n    this.fetchDataById();\n  },\n\n  methods: {\n    // 根据id查询用户详情\n    fetchDataById() {\n      utilsApi.getUserDetailById(this.userId).then((response) => {\n        this.userDetail = response.data;\n        // 特殊处理:将注册时间的时间戳转为时间字符串\n        var time = this.userDetail.create_ts;\n        var timeStr = new Date(parseInt(time) * 1000)\n          .toLocaleString()\n\n          .replace(/:\\d{1,2}$/, \" \");\n        this.userDetail.create_ts = timeStr;\n      });\n    },\n    // 编辑用户详情\n    editUserDetail() {\n      this.isEdit = true;\n    },\n\n    // 更新用户详情\n    saveUserDetail() {\n      this.isEdit = false;\n      utilsApi\n        .updateUserDetailById(this.userId, this.userDetail)\n        .then((response) => {\n          if (response.message === \"SUCCESS\") {\n            this.$message({\n              message: \"更新成功\",\n              type: \"success\",\n            });\n          }\n        });\n    },\n\n    // 返回用户信息列表\n    back() {\n      this.$router.push(\"/user/index\");\n    },\n  },\n};\n</script>\n"],"mappings":";;AA+HA,OAAAA,QAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;MACAC,MAAA;MAAA;MACAC,MAAA;IACA;EACA;EAEAC,OAAA,WAAAA,QAAA;IACA;IACA,KAAAD,MAAA,QAAAE,MAAA,CAAAC,KAAA,CAAAH,MAAA;IACA,KAAAI,aAAA;EACA;EAEAC,OAAA;IACA;IACAD,aAAA,WAAAA,cAAA;MAAA,IAAAE,KAAA;MACAV,QAAA,CAAAW,iBAAA,MAAAP,MAAA,EAAAQ,IAAA,WAAAC,QAAA;QACAH,KAAA,CAAAR,UAAA,GAAAW,QAAA,CAAAZ,IAAA;QACA;QACA,IAAAa,IAAA,GAAAJ,KAAA,CAAAR,UAAA,CAAAa,SAAA;QACA,IAAAC,OAAA,OAAAC,IAAA,CAAAC,QAAA,CAAAJ,IAAA,UACAK,cAAA,GAEAC,OAAA;QACAV,KAAA,CAAAR,UAAA,CAAAa,SAAA,GAAAC,OAAA;MACA;IACA;IACA;IACAK,cAAA,WAAAA,eAAA;MACA,KAAAlB,MAAA;IACA;IAEA;IACAmB,cAAA,WAAAA,eAAA;MAAA,IAAAC,MAAA;MACA,KAAApB,MAAA;MACAH,QAAA,CACAwB,oBAAA,MAAApB,MAAA,OAAAF,UAAA,EACAU,IAAA,WAAAC,QAAA;QACA,IAAAA,QAAA,CAAAY,OAAA;UACAF,MAAA,CAAAG,QAAA;YACAD,OAAA;YACAE,IAAA;UACA;QACA;MACA;IACA;IAEA;IACAC,IAAA,WAAAA,KAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]}]}