{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js!/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/auth/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/auth/index.vue","mtime":1716445932135},{"path":"/Users/ke/workspace/platform/house_admin/babel.config.js","mtime":1716445932121},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIC8vIOaVsOaNruWIl+ihqAogICAgICB0b3RhbDogMCwKICAgICAgLy8g5pWw5o2u5bqT5Lit55qE5oC76K6w5b2V5pWwCiAgICAgIHBhZ2U6IDEsCiAgICAgIC8vIOm7mOiupOmhteeggQogICAgICBsaW1pdDogNSwKICAgICAgLy8g5q+P6aG16K6w5b2V5pWwCiAgICAgIHNlYXJjaE9iajoge30gLy8g5p+l6K+i5p2h5Lu2CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bliJfooajmlbDmja4KICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAvLyDlsIHoo4XliIbpobXlj4LmlbAKICAgICAgdmFyIHBhcmFtID0ge307CiAgICAgIHBhcmFtLm9mZnNldCA9ICh0aGlzLnBhZ2UgLSAxKSAqIHRoaXMubGltaXQ7CiAgICAgIHBhcmFtLmxpbWl0ID0gdGhpcy5saW1pdDsKICAgICAgcGFyYW0ucXVlcnlfcGFyYW1zID0gewogICAgICAgIGF1dGhfc3RhdHVzX19pbjogWyJhdXRob3JpemVkIiwgImF1ZGl0aW5nIiwgInVuYXBwcm92ZSJdCiAgICAgIH07CiAgICAgIHV0aWxzQXBpLmdldFVzZXJMaXN0KHBhcmFtKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGFfbGlzdDsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5saXN0Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAvLyDnibnmrorlpITnkIY65bCG55Sz6K+35pe26Ze055qE5pe26Ze05oiz6L2s5Li65pe26Ze05a2X56ym5LiyCiAgICAgICAgICB2YXIgdGltZSA9IF90aGlzLmxpc3RbaV0uYXV0aF9hcHBseV90czsKICAgICAgICAgIHZhciB0aW1lU3RyID0gbmV3IERhdGUocGFyc2VJbnQodGltZSkgKiAxMDAwKS50b0xvY2FsZVN0cmluZygpLnJlcGxhY2UoLzpcZHsxLDJ9JC8sICIgIik7CiAgICAgICAgICBfdGhpcy5saXN0W2ldLmF1dGhfYXBwbHlfdHMgPSB0aW1lU3RyOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6Lez6L2s6Iez5a6h5qC46K+m5oOF55WM6Z2iCiAgICB0b0F1ZGl0RGV0YWlsOiBmdW5jdGlvbiB0b0F1ZGl0RGV0YWlsKHVzZXJJZCwgdGFnKSB7CiAgICAgIC8vIOiLpXRhZ+S4ujDvvIzliJnkuLrmn6XnnIvmk43kvZwKICAgICAgLy8g6IuldGFn5Li6Me+8jOWImeS4uuWuoeaJueaTjeS9nAogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9hdXRoL2RldGFpbCIsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHRhZzogdGFnLAogICAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOW9k+S/ruaUueavj+mhteaYvuekuueahOiusOW9leaVsOaXtuiwg+eUqOatpOWHveaVsAogICAgY2hhbmdlUGFnZVNpemU6IGZ1bmN0aW9uIGNoYW5nZVBhZ2VTaXplKHNpemUpIHsKICAgICAgdGhpcy5saW1pdCA9IHNpemU7CiAgICAgIC8vIOmHjeaWsOiOt+WPluS4gOasoeaVsOaNrgogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIC8vIOW9k+eCueWHu+mhteeggei/m+ihjOmhtemdouWIh+aNouaXtuiwg+eUqOatpOWHveaVsAogICAgY2hhbmdlQ3VycmVudFBhZ2U6IGZ1bmN0aW9uIGNoYW5nZUN1cnJlbnRQYWdlKHBhZ2UpIHsKICAgICAgdGhpcy5wYWdlID0gcGFnZTsKICAgICAgLy8g6YeN5paw6I635Y+W5LiA5qyh5pWw5o2uCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgLy8g5riF56m65p+l6K+i5p2h5Lu2CiAgICByZXNldERhdGE6IGZ1bmN0aW9uIHJlc2V0RGF0YSgpIHsKICAgICAgLy8g6L+Y5Y6f5p+l6K+i6KGo5Y2VCiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge307CiAgICAgIC8vIOmHjeaWsOiOt+WPluS4gOasoeaVsOaNrgogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["utilsApi","data","list","total","page","limit","searchObj","created","fetchData","methods","_this","param","offset","query_params","auth_status__in","getUserList","then","response","data_list","i","length","time","auth_apply_ts","timeStr","Date","parseInt","toLocaleString","replace","toAuditDetail","userId","tag","$router","push","path","query","changePageSize","size","changeCurrentPage","resetData"],"sources":["src/views/auth/index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- 列表 -->\n    <el-table :data=\"list\" border stripe>\n      <el-table-column label=\"序号\" width=\"50\">\n        <template slot-scope=\"scope\">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"real_name\" label=\"用户姓名\" align=\"center\" />\n      <el-table-column prop=\"mobile\" label=\"手机号\" align=\"center\" />\n      <el-table-column prop=\"id_card\" label=\"身份证号\" align=\"center\" />\n      <el-table-column prop=\"auth_status\" label=\"状态\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag type=\"warning\" v-if=\"scope.row.auth_status === 'auditing'\">\n            审核中\n          </el-tag>\n          <el-tag type=\"primary\" v-if=\"scope.row.auth_status === 'authorized'\">\n            已实名\n          </el-tag>\n          <el-tag type=\"danger\" v-if=\"scope.row.auth_status === 'unapprove'\">\n            审核不通过\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"auth_apply_ts\" label=\"申请时间\" align=\"center\" />\n      <el-table-column label=\"操作\" align=\"center\" width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            size=\"mini\"\n            @click=\"toAuditDetail(scope.row.user_id, 0)\"\n          >\n            查看\n          </el-button>\n          <el-button\n            v-if=\"scope.row.auth_status === 'auditing'\"\n            type=\"warning\"\n            size=\"mini\"\n            @click=\"toAuditDetail(scope.row.user_id, 1)\"\n          >\n            审批\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      @size-change=\"changePageSize\"\n      @current-change=\"changeCurrentPage\"\n      :current-page=\"page\"\n      :page-sizes=\"[5, 10, 15, 20]\"\n      :page-size=\"limit\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"total\"\n      style=\"padding: 30px 0\"\n    ></el-pagination>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      list: [], // 数据列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 5, // 每页记录数\n      searchObj: {}, // 查询条件\n    };\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  methods: {\n    // 获取列表数据\n    fetchData() {\n      // 封装分页参数\n      var param = {};\n      param.offset = (this.page - 1) * this.limit;\n      param.limit = this.limit;\n      param.query_params = {\n        auth_status__in: [\"authorized\", \"auditing\", \"unapprove\"],\n      };\n      utilsApi.getUserList(param).then((response) => {\n        this.list = response.data.data_list;\n        this.total = response.data.total;\n        for (var i = 0; i < this.list.length; ++i) {\n          // 特殊处理:将申请时间的时间戳转为时间字符串\n          var time = this.list[i].auth_apply_ts;\n          var timeStr = new Date(parseInt(time) * 1000)\n            .toLocaleString()\n\n            .replace(/:\\d{1,2}$/, \" \");\n          this.list[i].auth_apply_ts = timeStr;\n        }\n      });\n    },\n    // 跳转至审核详情界面\n    toAuditDetail(userId, tag) {\n      // 若tag为0，则为查看操作\n      // 若tag为1，则为审批操作\n      this.$router.push({\n        path: \"/auth/detail\",\n        query: {\n          tag: tag,\n          userId: userId,\n        },\n      });\n    },\n    // 当修改每页显示的记录数时调用此函数\n    changePageSize(size) {\n      this.limit = size;\n      // 重新获取一次数据\n      this.fetchData();\n    },\n    // 当点击页码进行页面切换时调用此函数\n    changeCurrentPage(page) {\n      this.page = page;\n      // 重新获取一次数据\n      this.fetchData();\n    },\n    // 清空查询条件\n    resetData() {\n      // 还原查询表单\n      this.searchObj = {};\n      // 重新获取一次数据\n      this.fetchData();\n    },\n  },\n};\n</script>\n"],"mappings":";;AA+DA,OAAAA,QAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;MAAA;MACAC,KAAA;MAAA;MACAC,IAAA;MAAA;MACAC,KAAA;MAAA;MACAC,SAAA;IACA;EACA;EAEAC,OAAA,WAAAA,QAAA;IACA,KAAAC,SAAA;EACA;EAEAC,OAAA;IACA;IACAD,SAAA,WAAAA,UAAA;MAAA,IAAAE,KAAA;MACA;MACA,IAAAC,KAAA;MACAA,KAAA,CAAAC,MAAA,SAAAR,IAAA,aAAAC,KAAA;MACAM,KAAA,CAAAN,KAAA,QAAAA,KAAA;MACAM,KAAA,CAAAE,YAAA;QACAC,eAAA;MACA;MACAd,QAAA,CAAAe,WAAA,CAAAJ,KAAA,EAAAK,IAAA,WAAAC,QAAA;QACAP,KAAA,CAAAR,IAAA,GAAAe,QAAA,CAAAhB,IAAA,CAAAiB,SAAA;QACAR,KAAA,CAAAP,KAAA,GAAAc,QAAA,CAAAhB,IAAA,CAAAE,KAAA;QACA,SAAAgB,CAAA,MAAAA,CAAA,GAAAT,KAAA,CAAAR,IAAA,CAAAkB,MAAA,IAAAD,CAAA;UACA;UACA,IAAAE,IAAA,GAAAX,KAAA,CAAAR,IAAA,CAAAiB,CAAA,EAAAG,aAAA;UACA,IAAAC,OAAA,OAAAC,IAAA,CAAAC,QAAA,CAAAJ,IAAA,UACAK,cAAA,GAEAC,OAAA;UACAjB,KAAA,CAAAR,IAAA,CAAAiB,CAAA,EAAAG,aAAA,GAAAC,OAAA;QACA;MACA;IACA;IACA;IACAK,aAAA,WAAAA,cAAAC,MAAA,EAAAC,GAAA;MACA;MACA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAC,KAAA;UACAJ,GAAA,EAAAA,GAAA;UACAD,MAAA,EAAAA;QACA;MACA;IACA;IACA;IACAM,cAAA,WAAAA,eAAAC,IAAA;MACA,KAAA/B,KAAA,GAAA+B,IAAA;MACA;MACA,KAAA5B,SAAA;IACA;IACA;IACA6B,iBAAA,WAAAA,kBAAAjC,IAAA;MACA,KAAAA,IAAA,GAAAA,IAAA;MACA;MACA,KAAAI,SAAA;IACA;IACA;IACA8B,SAAA,WAAAA,UAAA;MACA;MACA,KAAAhC,SAAA;MACA;MACA,KAAAE,SAAA;IACA;EACA;AACA","ignoreList":[]}]}