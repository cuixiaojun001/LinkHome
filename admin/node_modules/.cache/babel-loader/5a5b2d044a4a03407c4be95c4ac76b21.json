{"remainingRequest":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js!/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ke/workspace/platform/house_admin/src/views/auth/detail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/ke/workspace/platform/house_admin/src/views/auth/detail.vue","mtime":1716445932135},{"path":"/Users/ke/workspace/platform/house_admin/babel.config.js","mtime":1716445932121},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/babel-loader/lib/index.js","mtime":1716446972394},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/cache-loader/dist/cjs.js","mtime":1716446970693},{"path":"/Users/ke/workspace/platform/house_admin/node_modules/vue-loader/lib/index.js","mtime":1716446972582}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCB1dGlsc0FwaSBmcm9tICJAL2FwaS91dGlscy5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFnOiAwLAogICAgICAvLyDmk43kvZzmoIfor4YKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAgLy/pmLLmraLph43lpI3mj5DkuqQKICAgICAgdXNlcjoge30sCiAgICAgIHVzZXJJZDogMCwKICAgICAgYXV0aF9zdGF0dXNfZmxhZzogIjEiCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIC8vIOiOt+WPluWunuWQjeiupOivgeWIl+ihqOS8oOmAkui/h+adpeeahOWPguaVsAogICAgdGhpcy50YWcgPSB0aGlzLiRyb3V0ZS5xdWVyeS50YWc7CiAgICB0aGlzLnVzZXJJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnVzZXJJZDsKICAgIHRoaXMuZmV0Y2hEYXRhQnlJZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5oyH5a6a55So5oi3aWTnmoTlrqHmoLjor6bmg4Xkv6Hmga8KICAgIC8vIOagueaNrmlk5p+l6K+i55So5oi36K+m5oOFCiAgICBmZXRjaERhdGFCeUlkOiBmdW5jdGlvbiBmZXRjaERhdGFCeUlkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB1dGlsc0FwaS5nZXRVc2VyRGV0YWlsQnlJZCh0aGlzLnVzZXJJZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy51c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvLyDnibnmrorlpITnkIY65bCG5rOo5YaM5pe26Ze055qE5pe26Ze05oiz6L2s5Li65pe26Ze05a2X56ym5LiyCiAgICAgICAgdmFyIHRpbWUgPSBfdGhpcy51c2VyLmF1dGhfYXBwbHlfdHM7CiAgICAgICAgdmFyIHRpbWVTdHIgPSBuZXcgRGF0ZShwYXJzZUludCh0aW1lKSAqIDEwMDApLnRvTG9jYWxlU3RyaW5nKCkucmVwbGFjZSgvOlxkezEsMn0kLywgIiAiKTsKICAgICAgICBfdGhpcy51c2VyLmF1dGhfYXBwbHlfdHMgPSB0aW1lU3RyOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDov5Tlm57lrp7lkI3orqTor4HliJfooagKICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYXV0aC9pbmRleCIpOwogICAgfSwKICAgIC8vIOaPkOS6pOWuoeaguAogICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgLy8g5Yik5pat5a6h5qC45piv5ZCm6YCa6L+HCiAgICAgIGlmICh0aGlzLmF1dGhfc3RhdHVzX2ZsYWcgPT09ICIwIikgewogICAgICAgIHRoaXMudXNlci5hdXRoX3N0YXR1cyA9ICJ1bmFwcHJvdmUiOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYXV0aF9zdGF0dXNfZmxhZyA9PT0gIjEiKSB7CiAgICAgICAgdGhpcy51c2VyLmF1dGhfc3RhdHVzID0gImF1dGhvcml6ZWQiOwogICAgICB9CiAgICAgIC8vIOabtOaWsOeUqOaIt+S/oeaBrwogICAgICB1dGlsc0FwaS51cGRhdGVVc2VyRGV0YWlsQnlJZCh0aGlzLnVzZXJJZCwgdGhpcy51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5tZXNzYWdlID09PSAiU1VDQ0VTUyIpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLlrqHmoLjlrozmiJAiLAogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIC8vIOi3s+i9rOWbnuWunuWQjeiupOivgeWIl+ihqAogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2F1dGgvaW5kZXgiKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["utilsApi","data","tag","saveBtnDisabled","user","userId","auth_status_flag","mounted","$route","query","fetchDataById","methods","_this","getUserDetailById","then","response","time","auth_apply_ts","timeStr","Date","parseInt","toLocaleString","replace","back","$router","push","onSubmit","_this2","auth_status","updateUserDetailById","message","$message","type"],"sources":["src/views/auth/detail.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"100px\" class=\"form-table\">\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"状态\">\n            <span v-if=\"user.auth_status === 'auditing'\">审核中</span>\n            <span v-if=\"user.auth_status === 'authorized'\">已实名</span>\n            <span v-if=\"user.auth_status === 'unapprove'\">审核不通过</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"申请时间\">\n            {{ user.auth_apply_ts }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"姓名\">\n            {{ user.real_name }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"性别\">\n            <span v-if=\"user.gender === 'male'\">男</span>\n            <span v-if=\"user.gender === 'female'\">女</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"年龄\">\n            {{ user.age }}\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"6\">\n          <el-form-item label=\"手机\">\n            {{ user.mobile }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n\n      <el-row>\n        <el-col :span=\"6\">\n          <el-form-item label=\"身份证号\">\n            {{ user.id_card }}\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form-item label=\"身份证正面\">\n            <span>\n              <el-image style=\"width: 150px\" :src=\"user.id_card_front\" />\n            </span>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row>\n        <el-col :span=\"24\">\n          <el-form-item label=\"身份证反面\">\n            <span>\n              <el-image style=\"width: 150px\" :src=\"user.id_card_back\" />\n            </span>\n          </el-form-item>\n        </el-col>\n      </el-row>\n\n      <el-row style=\"text-align: center\" v-if=\"tag === 0\">\n        <el-button @click=\"back\"> 返回 </el-button>\n      </el-row>\n    </el-form>\n\n    <el-form label-width=\"170px\">\n      <el-form-item label=\"是否通过\" v-if=\"tag === 1\">\n        <el-radio-group v-model=\"auth_status_flag\">\n          <el-radio label=\"1\"> 通过 </el-radio>\n          <el-radio label=\"0\"> 不通过 </el-radio>\n        </el-radio-group>\n      </el-form-item>\n\n      <el-row style=\"text-align: center\" v-if=\"tag === 1\">\n        <el-button type=\"primary\" @click=\"onSubmit()\"> 确定 </el-button>\n      </el-row>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport utilsApi from \"@/api/utils.js\";\n\nexport default {\n  data() {\n    return {\n      tag: 0, // 操作标识\n      saveBtnDisabled: false, //防止重复提交\n      user: {},\n      userId: 0,\n      auth_status_flag: \"1\",\n    };\n  },\n\n  mounted() {\n    // 获取实名认证列表传递过来的参数\n    this.tag = this.$route.query.tag;\n    this.userId = this.$route.query.userId;\n    this.fetchDataById();\n  },\n\n  methods: {\n    // 获取指定用户id的审核详情信息\n    // 根据id查询用户详情\n    fetchDataById() {\n      utilsApi.getUserDetailById(this.userId).then((response) => {\n        this.user = response.data;\n        // 特殊处理:将注册时间的时间戳转为时间字符串\n        var time = this.user.auth_apply_ts;\n        var timeStr = new Date(parseInt(time) * 1000)\n          .toLocaleString()\n          .replace(/:\\d{1,2}$/, \" \");\n        this.user.auth_apply_ts = timeStr;\n      });\n    },\n    // 返回实名认证列表\n    back() {\n      this.$router.push(\"/auth/index\");\n    },\n    // 提交审核\n    onSubmit() {\n      // 判断审核是否通过\n      if (this.auth_status_flag === \"0\") {\n        this.user.auth_status = \"unapprove\";\n      } else if (this.auth_status_flag === \"1\") {\n        this.user.auth_status = \"authorized\";\n      }\n      // 更新用户信息\n      utilsApi.updateUserDetailById(this.userId, this.user).then((response) => {\n        if (response.message === \"SUCCESS\") {\n          this.$message({\n            message: \"审核完成\",\n            type: \"success\",\n          });\n        }\n      });\n      // 跳转回实名认证列表\n      this.$router.push(\"/auth/index\");\n    },\n  },\n};\n</script>\n"],"mappings":";;AAwFA,OAAAA,QAAA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,GAAA;MAAA;MACAC,eAAA;MAAA;MACAC,IAAA;MACAC,MAAA;MACAC,gBAAA;IACA;EACA;EAEAC,OAAA,WAAAA,QAAA;IACA;IACA,KAAAL,GAAA,QAAAM,MAAA,CAAAC,KAAA,CAAAP,GAAA;IACA,KAAAG,MAAA,QAAAG,MAAA,CAAAC,KAAA,CAAAJ,MAAA;IACA,KAAAK,aAAA;EACA;EAEAC,OAAA;IACA;IACA;IACAD,aAAA,WAAAA,cAAA;MAAA,IAAAE,KAAA;MACAZ,QAAA,CAAAa,iBAAA,MAAAR,MAAA,EAAAS,IAAA,WAAAC,QAAA;QACAH,KAAA,CAAAR,IAAA,GAAAW,QAAA,CAAAd,IAAA;QACA;QACA,IAAAe,IAAA,GAAAJ,KAAA,CAAAR,IAAA,CAAAa,aAAA;QACA,IAAAC,OAAA,OAAAC,IAAA,CAAAC,QAAA,CAAAJ,IAAA,UACAK,cAAA,GACAC,OAAA;QACAV,KAAA,CAAAR,IAAA,CAAAa,aAAA,GAAAC,OAAA;MACA;IACA;IACA;IACAK,IAAA,WAAAA,KAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACA;IACAC,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MACA;MACA,SAAArB,gBAAA;QACA,KAAAF,IAAA,CAAAwB,WAAA;MACA,gBAAAtB,gBAAA;QACA,KAAAF,IAAA,CAAAwB,WAAA;MACA;MACA;MACA5B,QAAA,CAAA6B,oBAAA,MAAAxB,MAAA,OAAAD,IAAA,EAAAU,IAAA,WAAAC,QAAA;QACA,IAAAA,QAAA,CAAAe,OAAA;UACAH,MAAA,CAAAI,QAAA;YACAD,OAAA;YACAE,IAAA;UACA;QACA;MACA;MACA;MACA,KAAAR,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]}]}