"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_virtual/_tslib.js"),t=require("./mixins/mixins.js"),n=require("./utils/amap-helpers.js"),i=require("./mixins/props.js"),o=require("./mixins/common.js"),r=require("./mixins/overlay.js"),s=require("./utils/types.js"),a=require("./utils/safe-get.js"),u=t.default(r.default,o.withVisible(!0,"open","close")).extend({name:"AmapInfoWindow",amapMeta:{slot:!0,initComponent:function(t,n){return e.__awaiter(this,void 0,void 0,(function(){var i,o;return e.__generator(this,(function(r){return i=e.__assign({},n),o=a.default(this.$slots,"default.0.elm"),i.isCustom&&o&&(i.content=o),[2,new t.InfoWindow(i)]}))}))},events:["change","open","close"]},props:{isCustom:{type:Boolean,default:void 0},autoMove:{type:Boolean,default:void 0},avoid:i.defineProp({type:Array}),closeWhenClickMap:{type:Boolean,default:void 0},content:i.defineProp("setContent",String),size:i.defineProp({type:Array,transform:function(e){return new window.AMap.Size(e[0],e[1])}}),anchor:i.defineProp({type:String,setter:"setAnchor",validator:function(e){return s.Anchors.includes(e)}}),offset:i.defineProp({type:Array,transform:function(e){return new window.AMap.Pixel(e[0],e[1])}}),position:i.defineProp({type:Array,deep:!0,setter:function(e,t){if(t){var i=e.getPosition();i&&n.nearPair(t,n.lngLat2Array(i))||e.setPosition([t[0],t[1]])}},getter:function(e){var t=e.getPosition();return n.lngLat2Array(t)},equals:n.theSamePair})},methods:{open:function(){var e=this;this.$context.ready.then((function(t){var n=e.position;t.open(e.$map,n)}))},close:function(){this.$context.ready.then((function(e){e.close()}))},onOpen:function(){this.visible||this.$emit("update:visible",!0)},onClose:function(){this.visible&&this.$emit("update:visible",!1)},_updateContent:function(){var e=this;this.visible&&this.$nextTick((function(){var t=a.default(e.$slots,"default.0.elm",e.content);e.$context.ready.then((function(e){e.setContent(t)}))}))}},mounted:function(){return e.__awaiter(this,void 0,void 0,(function(){var t,n;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,this.$context.ready];case 1:return t=e.sent(),n=t,this.visible&&(this._updateContent(),this.open()),n.on("open",this.onOpen),n.on("close",this.onClose),[2]}}))}))},watch:{visible:"_updateContent",content:"_updateContent"}});exports.default=u;
